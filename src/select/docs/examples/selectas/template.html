<div ng-controller="selectSelectasController">
    <h2>Select <b>as</b> (lazy loading case)</h2>
    <div class="row">
        <div class="col-md-8">
            <oi-select
                oi-options="item.id as item.name for item in shopArrFn($query, $querySelectAs)"
                ng-model="bundle"
                multiple
                placeholder="Select"
                oi-select-options="{
                    newItem: 'prompt',
                    newItemFn: addItem,
                }"
                ></oi-select>
        </div>
    </div>
<div class="row">
<div class="col-md-8">
<div hljs>
oi-options="item.id as item.name for item in shopArrFn($query, $querySelectAs)"
ng-model="bundle"
multiple
oi-select-options="{
    newItem: 'prompt',
    newItemFn: addItem,
}"
</div>
<div hljs>
$scope.shopArrFn = function(query, querySelectAs) {
    if (querySelectAs) {
        return getOptionsById(querySelectAs);
    } else {
        return findOptions(query);
    }
};
</div>
<div hljs>
$scope.addItem = function(query) {
    return createOption(query);
};
</div>
</div>
<pre class="col-md-4">
{{bundle}}
</pre>
</div>
</div>